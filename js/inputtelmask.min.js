class InputTelMask{constructor(e){if(this.el=this.getElement(e.selector),!this.el)return console.log("Что-то не так с селектором");this.layout=e.layout||"+7 ___ ___ __ __",this.maskreg=this.getRegexp(),this.setListeners()}getRegexp=()=>{let e=this.layout.replace(/_/g,"\\d");return e=e.replace(/\(/g,"\\("),e=e.replace(/\)/g,"\\)"),e=e.replace(/\+/g,"\\+"),e=e.replace(/\s/g,"\\s"),e};mask=e=>{let t=e.target,s=this.layout,i=0,l=s.replace(/\D/g,""),n=t.value.replace(/\D/g,"");if(l.length>=n.length&&(n=l),t.value=s.replace(/./g,(e=>/[_\d]/.test(e)&&i<n.length?n.charAt(i++):i>=n.length?"":e)),"blur"==e.type){new RegExp(this.maskreg).test(t.value)||(t.value="")}else this.setCursorPosition(t.value.length,t)};setCursorPosition=(e,t)=>{if(t.focus(),t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){let s=t.createTextRange();s.collapse(!0),s.moveEnd("character",e),s.moveStart("character",e),s.select()}};setListeners=()=>{this.el.addEventListener("input",this.mask.bind(this),!1),this.el.addEventListener("focus",this.mask.bind(this),!1),this.el.addEventListener("blur",this.mask.bind(this),!1)};getElement=e=>{if(void 0===e)return!1;if(this.isElement(e))return e;if("string"==typeof e){let t=document.querySelector(e);if(this.isElement(t))return t}return!1};isElement=e=>e instanceof Element||e instanceof HTMLDocument}